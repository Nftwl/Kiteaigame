<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kite AI: Wind Runner 🪁</title>
<style>
  html,body {
    margin:0;
    padding:0;
    overflow:hidden;
    background:linear-gradient(to bottom,#87CEEB,#F0F8FF);
    font-family:'Poppins',sans-serif;
    user-select:none;
  }
  canvas {
    display:block;
    margin:0 auto;
    background:linear-gradient(to bottom,#87CEEB 0%,#fefefe 100%);
    border:3px solid #FFD700;
    border-radius:12px;
  }
  button {
    padding:10px 18px;
    border:none;
    border-radius:10px;
    background:#FFD700;
    color:#222;
    font-weight:bold;
    cursor:pointer;
    margin:4px;
    transition:0.2s;
  }
  button:hover {
    background:#FFC300;
  }
  #overlay {
    position:fixed;top:0;left:0;width:100%;height:100%;
    display:none;align-items:center;justify-content:center;
    background:rgba(0,0,0,0.6);flex-direction:column;
    color:white;text-align:center;z-index:20;
  }
</style>
</head>
<body>

<canvas id="gameCanvas" width="360" height="480"></canvas>

<div style="text-align:center;margin-top:8px;">
  <button id="startBtn">🎮 Start</button>
  <button id="infoBtn">ℹ️ About KiteAI</button>
  <button id="leaderboardBtn">🏆 Leaderboard</button>
</div>

<div id="overlay">
  <h1 id="overlayText"></h1>
  <button id="restartBtn">🔄 Restart</button>
  <button id="shareBtn">📤 Share</button>
  <p style="margin-top:10px;font-size:13px;">CEO / Co-founder: @ChiZhangData<br>
  CTO / Co-founder: @scottshics<br>
  Official: @GoKiteAI<br>
  Made by @Vikash1234Singh<br>
  “Kite AI: Wind Runner” Event</p>
</div>

<!-- About KiteAI Popup -->
<div id="infoBox" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:30;align-items:center;justify-content:center;">
  <div style="background:white;padding:20px;border-radius:16px;max-width:340px;text-align:left;color:#333;">
    <h2>About KiteAI 🪁</h2>
    <p><b>KiteAI</b> merges deep learning & creative intelligence to build smarter AI tools.  
       It focuses on scalable model optimization, AI agents, and generative collaboration.</p>
    <p>🚀 <b>Mission:</b> Making AI creation as smooth and free as flying a kite in open skies.</p>
    <p>🔗 Follow: <a href="https://x.com/GoKiteAI" target="_blank">@GoKiteAI</a></p>
    <button onclick="document.getElementById('infoBox').style.display='none'">Close</button>
  </div>
</div>

<!-- Leaderboard Popup -->
<div id="leaderboardBox" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:30;align-items:center;justify-content:center;">
  <div style="background:white;padding:20px;border-radius:16px;max-width:340px;text-align:center;color:#333;">
    <h2>🏆 KiteAI Leaderboard</h2>
    <p>Enter your X handle to register your score!</p>
    <input type="text" id="xHandle" placeholder="@yourhandle"
           style="padding:8px;width:90%;border-radius:8px;border:1px solid #ccc;"><br><br>
    <button id="saveScoreBtn">Save Score</button>
    <ul id="leaderList" style="text-align:left;margin-top:10px;font-size:14px;max-height:200px;overflow:auto;"></ul>
    <button onclick="document.getElementById('leaderboardBox').style.display='none'">Close</button>
  </div>
</div>

<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");
const W=canvas.width,H=canvas.height;

let kiteY, kiteVel, obstacles, score, running=false, gameOver=false;
const gravity=0.4, jump=-6, gapHeight=130, obstacleWidth=50, speed=2.3;

// Draw background elements
function drawSky(){
  // Clouds
  for(let i=0;i<4;i++){
    let x=(i*120+(Date.now()/20)%120);
    let y=50+40*Math.sin(i+Date.now()/500);
    ctx.beginPath();
    ctx.fillStyle="rgba(255,255,255,0.8)";
    ctx.arc((x%W)-60,y,18,0,Math.PI*2);
    ctx.arc((x%W)-40,y-5,22,0,Math.PI*2);
    ctx.arc((x%W)-20,y+5,20,0,Math.PI*2);
    ctx.fill();
  }
}

// Brick-style pillar with KITEAI label
function drawObstacles(){
  obstacles.forEach(obs=>{
    ctx.fillStyle="#b05a32";
    ctx.fillRect(obs.x,0,obstacleWidth,obs.gapY);
    ctx.fillRect(obs.x,obs.gapY+gapHeight,obstacleWidth,H-obs.gapY-gapHeight);
    ctx.fillStyle="#fff";
    ctx.font="bold 18px Poppins";
    ctx.textAlign="center";
    ctx.fillText("KITEAI",obs.x+obstacleWidth/2,obs.gapY/2);
    ctx.fillText("SUPPORT",obs.x+obstacleWidth/2,obs.gapY+gapHeight+40);
  });
}

// Kite
function drawKite(){
  ctx.beginPath();
  ctx.moveTo(80,kiteY);
  ctx.lineTo(60,kiteY+20);
  ctx.lineTo(80,kiteY+40);
  ctx.lineTo(100,kiteY+20);
  ctx.closePath();
  ctx.fillStyle="#FF6347";
  ctx.fill();
  ctx.strokeStyle="#222";
  ctx.lineWidth=2;
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(80,kiteY+40);
  ctx.lineTo(80,kiteY+60);
  ctx.strokeStyle="#000";
  ctx.stroke();
}

// Reset
function resetGame(){
  kiteY=H/2; kiteVel=0; score=0;
  obstacles=[];
  for(let i=0;i<3;i++){
    obstacles.push({x:W+200*i,gapY:Math.random()*(H-200)+50});
  }
  running=true; gameOver=false;
  document.getElementById("overlay").style.display="none";
}

// Game Loop
function update(){
  if(!running)return;
  ctx.clearRect(0,0,W,H);
  drawSky();

  kiteVel+=gravity;
  kiteY+=kiteVel;

  obstacles.forEach(obs=>{obs.x-=speed;});
  if(obstacles[0].x+obstacleWidth<0){
    obstacles.shift();
    obstacles.push({x:obstacles[obstacles.length-1].x+200,gapY:Math.random()*(H-200)+50});
    score++;
  }

  drawObstacles();
  drawKite();
  ctx.fillStyle="#000";
  ctx.font="bold 22px Poppins";
  ctx.fillText(score,20,30);

  // collision
  obstacles.forEach(obs=>{
    if(80+10>obs.x && 80-10<obs.x+obstacleWidth &&
       (kiteY<obs.gapY || kiteY+20>obs.gapY+gapHeight)){
      endGame();
    }
  });
  if(kiteY>H||kiteY<0)endGame();
  if(running)requestAnimationFrame(update);
}

function endGame(){
  running=false;gameOver=true;
  document.getElementById("overlay").style.display="flex";
  document.getElementById("overlayText").innerText="Game Over! Score: "+score;
}

canvas.addEventListener("touchstart",()=>{if(running)kiteVel=jump;});
canvas.addEventListener("mousedown",()=>{if(running)kiteVel=jump;});
document.getElementById("startBtn").addEventListener("click",resetGame);
document.getElementById("restartBtn").addEventListener("click",resetGame);
document.getElementById("shareBtn").addEventListener("click",()=>{
  const text=`I scored ${score} in Kite AI: Wind Runner! 🪁\n@GoKiteAI #KiteAI`;
  window.open(`https://x.com/intent/tweet?text=${encodeURIComponent(text)}`,"_blank");
});

// About & Leaderboard popups
const infoBtn=document.getElementById("infoBtn");
const leaderboardBtn=document.getElementById("leaderboardBtn");
const leaderboardBox=document.getElementById("leaderboardBox");
const infoBox=document.getElementById("infoBox");
const leaderList=document.getElementById("leaderList");
const saveScoreBtn=document.getElementById("saveScoreBtn");
let leaderboard=JSON.parse(localStorage.getItem("kiteAI_leaderboard")||"[]");

infoBtn.addEventListener("click",()=>{infoBox.style.display="flex";});
leaderboardBtn.addEventListener("click",()=>{leaderboardBox.style.display="flex";renderLeaderboard();});
saveScoreBtn.addEventListener("click",()=>{
  const handle=document.getElementById("xHandle").value.trim();
  if(!handle)return alert("Please enter your X handle!");
  leaderboard.push({handle,score});
  leaderboard.sort((a,b)=>b.score-a.score);
  localStorage.setItem("kiteAI_leaderboard",JSON.stringify(leaderboard));
  renderLeaderboard();
  document.getElementById("xHandle").value="";
});
function renderLeaderboard(){
  leaderList.innerHTML=leaderboard.map((e,i)=>`<li>${i+1}. ${e.handle} — <b>${e.score}</b></li>`).join("")||"<li>No entries yet</li>";
}
</script>

</body>
</html>
