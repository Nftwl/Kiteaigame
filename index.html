<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kite Flight - Kite AI Wind Runner</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  font-family: 'Poppins', Arial, sans-serif;
  background: linear-gradient(180deg, #87CEEB 0%, #a3d9ff 100%);
}
canvas { display: block; }

#score {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 32px;
  font-weight: bold;
  color: #fff;
  text-shadow: 2px 2px 4px #000;
  z-index: 10;
}

/* üî• Background Text - Kite AI Wind Runner */
#bgText {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-8deg);
  font-size: 9vw;
  font-weight: 800;
  color: rgba(255, 255, 255, 0.08);
  text-shadow: 0 0 40px rgba(255, 255, 255, 0.1);
  z-index: 1;
  user-select: none;
  pointer-events: none;
  letter-spacing: 5px;
  text-transform: uppercase;
}

#overlay {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.6);
  z-index: 20;
  flex-direction: column;
}

#overlayContent {
  background: linear-gradient(145deg, #ffffff, #f0f0f0);
  padding: 20px;
  border-radius: 16px;
  text-align: center;
  max-width: 320px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

button {
  padding: 10px 16px;
  margin: 8px 4px 0 4px;
  font-size: 16px;
  border: none;
  border-radius: 12px;
  background: #fdd835;
  color: #212121;
  cursor: pointer;
  font-weight: bold;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

/* Corner Buttons */
.corner-btn {
  position: fixed;
  top: 10px;
  z-index: 30;
  background: #fff7;
  backdrop-filter: blur(8px);
  font-size: 14px;
  padding: 6px 10px;
  border-radius: 10px;
  font-weight: bold;
}
#aboutBtn { left: 10px; }
#leaderBtn { right: 10px; }
#pauseBtn {
  position: fixed;
  bottom: 10px;
  right: 10px;
  background: #fff7;
  font-size: 14px;
  padding: 6px 10px;
  border-radius: 10px;
  z-index: 30;
  font-weight: bold;
}

/* Popup Boxes */
.popup {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.6);
  z-index: 40;
}
.popup-content {
  background: #fff;
  padding: 20px;
  border-radius: 16px;
  text-align: center;
  max-width: 340px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}
</style>
</head>
<body>

<!-- üî• Background Text -->
<div id="bgText">Kite AI: Wind Runner</div>

<div id="score">0</div>

<!-- Corner Buttons -->
<button id="aboutBtn" class="corner-btn">‚ÑπÔ∏è About</button>
<button id="leaderBtn" class="corner-btn">üèÜ Leaderboard</button>
<button id="pauseBtn">‚è∏ Pause</button>

<div id="overlay">
  <div id="overlayContent">
    <h2 id="overlayTitle">ü™Å Kite Flight</h2>
    <p id="overlayText">Tap or Click to Start</p>
    <button id="startBtn">Start Game</button>
    <button id="shareBtn" style="display:none;">Share on X</button>
  </div>
</div>

<!-- About Popup -->
<div id="aboutPopup" class="popup">
  <div class="popup-content">
    <h2>About KiteAI ü™Å</h2>
    <p><b>KiteAI</b> is an AI-native blockchain and creative hub for autonomous agents & developers.</p>
    <p>‚ú® Wind Runner program honors creators building with passion and innovation.</p>
    <p>Follow: <a href="https://x.com/GoKiteAI" target="_blank">@GoKiteAI</a></p>
    <button onclick="document.getElementById('aboutPopup').style.display='none'">Close</button>
  </div>
</div>

<!-- Leaderboard Popup -->
<div id="leaderPopup" class="popup">
  <div class="popup-content">
    <h2>üèÜ Leaderboard</h2>
    <input id="xHandle" placeholder="@yourhandle" style="padding:8px;width:90%;border:1px solid #ccc;border-radius:8px;"><br><br>
    <button id="saveScoreBtn">Save Score</button>
    <ul id="leaderList" style="text-align:left;margin-top:10px;max-height:200px;overflow:auto;font-size:14px;"></ul>
    <button onclick="document.getElementById('leaderPopup').style.display='none'">Close</button>
  </div>
</div>

<canvas id="gameCanvas"></canvas>

<audio id="jumpSound" src="https://assets.mixkit.co/sfx/preview/mixkit-player-jumping-in-a-video-game-2046.mp3"></audio>
<audio id="pointSound" src="https://assets.mixkit.co/sfx/preview/mixkit-video-game-score-interface-2079.mp3"></audio>
<audio id="crashSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.mp3"></audio>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;
let gravity = 0.5;
let lift = -10;
let kite = { x: 100, y: H / 2, radius: 20, velocity: 0 };
let pipes = [];
let frame = 0;
let score = 0;
let gameOver = false;
let gameStarted = false;

const jumpSound = document.getElementById("jumpSound");
const pointSound = document.getElementById("pointSound");
const crashSound = document.getElementById("crashSound");

function resetGame() {
  kite.y = H / 2;
  kite.velocity = 0;
  pipes = [];
  score = 0;
  frame = 0;
  gameOver = false;
}

function drawKite() {
  ctx.fillStyle = "#ffeb3b";
  ctx.beginPath();
  ctx.moveTo(kite.x, kite.y);
  ctx.lineTo(kite.x - 20, kite.y + 20);
  ctx.lineTo(kite.x, kite.y + 40);
  ctx.lineTo(kite.x + 20, kite.y + 20);
  ctx.closePath();
  ctx.fill();
  ctx.strokeStyle = "#212121";
  ctx.lineWidth = 2;
  ctx.stroke();
}

function drawPipes() {
  ctx.fillStyle = "#4caf50";
  pipes.forEach(pipe => {
    ctx.fillRect(pipe.x, 0, pipe.width, pipe.top);
    ctx.fillRect(pipe.x, H - pipe.bottom, pipe.width, pipe.bottom);
  });
}

function update() {
  if (!gameStarted || gameOver) return;
  kite.velocity += gravity;
  kite.y += kite.velocity;

  if (frame % 90 === 0) {
    let top = Math.random() * (H / 2);
    let gap = 150;
    pipes.push({ x: W, width: 60, top: top, bottom: H - top - gap });
  }

  pipes.forEach(pipe => {
    pipe.x -= 4;
    if (pipe.x + pipe.width < 0) {
      pipes.shift();
      score++;
      pointSound.play();
    }
    if (kite.x + 20 > pipe.x && kite.x - 20 < pipe.x + pipe.width &&
       (kite.y - 20 < pipe.top || kite.y + 20 > H - pipe.bottom)) {
      gameOver = true;
      crashSound.play();
      document.getElementById("overlay").style.display = "flex";
      document.getElementById("overlayTitle").innerText = "Game Over üí•";
      document.getElementById("overlayText").innerText = `Your Score: ${score}`;
      document.getElementById("shareBtn").style.display = "inline-block";
    }
  });

  if (kite.y + kite.radius > H || kite.y - kite.radius < 0) {
    gameOver = true;
    crashSound.play();
    document.getElementById("overlay").style.display = "flex";
    document.getElementById("overlayTitle").innerText = "Game Over üí•";
    document.getElementById("overlayText").innerText = `Your Score: ${score}`;
    document.getElementById("shareBtn").style.display = "inline-block";
  }

  frame++;
}

function draw() {
  ctx.clearRect(0, 0, W, H);
  drawPipes();
  drawKite();
  document.getElementById("score").innerText = score;
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

document.getElementById("startBtn").addEventListener("click", () => {
  document.getElementById("overlay").style.display = "none";
  resetGame();
  gameStarted = true;
});

canvas.addEventListener("mousedown", () => {
  if (gameStarted && !gameOver) {
    kite.velocity = lift;
    jumpSound.play();
  }
});

document.getElementById("aboutBtn").onclick = () =>
  document.getElementById("aboutPopup").style.display = "flex";
document.getElementById("leaderBtn").onclick = () =>
  document.getElementById("leaderPopup").style.display = "flex";

document.getElementById("shareBtn").onclick = () => {
  const url = `https://x.com/intent/tweet?text=I scored ${score} in Kite AI: Wind Runner! ü™Å%0APlay now!`;
  window.open(url, "_blank");
};

loop();
</script>
</body>
</html>
