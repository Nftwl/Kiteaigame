<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kite Flight - GoKiteAI</title>
<style>
html, body { margin:0; padding:0; overflow:hidden; font-family: Arial, sans-serif; background:#87CEEB; }
canvas { display:block; }
#score { position:absolute; top:20px; left:50%; transform:translateX(-50%); font-size:32px; font-weight:bold; color:#fff; text-shadow:2px 2px 4px #000; z-index:10; }
#overlay {
  position:fixed; top:0; left:0; right:0; bottom:0;
  display:flex; align-items:center; justify-content:center;
  background:rgba(0,0,0,0.6); z-index:20; flex-direction:column;
}
#overlayContent {
  background:linear-gradient(145deg,#ffffff,#f0f0f0); padding:20px; border-radius:16px; text-align:center; max-width:320px; box-shadow:0 8px 20px rgba(0,0,0,0.3);
}
button { padding:10px 16px; margin:8px 4px 0 4px; font-size:16px; border:none; border-radius:12px; background:#fdd835; color:#212121; cursor:pointer; font-weight:bold; box-shadow:0 4px 8px rgba(0,0,0,0.2); }
</style>
</head>
<body>
<div id="score">0</div>

<div id="overlay">
  <div id="overlayContent">
    <h2 id="overlayTitle">ü™Å Kite Flight</h2>
    <p id="overlayText">Tap or Click to Start</p>
    <button id="startBtn">Start Game</button>
    <button id="shareBtn" style="display:none;">Share on X</button>
  </div>
</div>

<canvas id="gameCanvas"></canvas>

<audio id="jumpSound" src="https://assets.mixkit.co/sfx/preview/mixkit-player-jumping-in-a-video-game-2046.mp3"></audio>
<audio id="pointSound" src="https://assets.mixkit.co/sfx/preview/mixkit-video-game-score-interface-2079.mp3"></audio>
<audio id="crashSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.mp3"></audio>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;

const kite = {x:80, y:H/2, vy:0, w:40, h:40, angle:0};
const gravity = 0.5;
const lift = -10;
let obstacles = [];
const obstacleWidth = 70; 
const gapHeight = 180;
let frame = 0;
let score = 0;
let gameOverFlag = false;
let gameStarted = false;
let animationId = null;

// Clouds ‚òÅÔ∏è multi-colored
const cloudColors = ["#FFFFFF","#F0F0F0","#FFE0E0","#E0F7FA"];
const clouds=[];
for(let i=0;i<6;i++){
  clouds.push({
    x:Math.random()*W,
    y:Math.random()*H/2,
    scale:0.5+Math.random()*0.5,
    speed:0.2 + Math.random()*0.3,
    color: cloudColors[Math.floor(Math.random()*cloudColors.length)]
  });
}

// Particles
const particles=[];

const scoreEl = document.getElementById('score');
const overlay = document.getElementById('overlay');
const overlayTitle = document.getElementById('overlayTitle');
const overlayText = document.getElementById('overlayText');
const startBtn = document.getElementById('startBtn');
const shareBtn = document.getElementById('shareBtn');

const jumpSound = document.getElementById('jumpSound');
const pointSound = document.getElementById('pointSound');
const crashSound = document.getElementById('crashSound');

function resetGame(){
    kite.y = H/2; kite.vy = 0; kite.angle=0;
    obstacles=[]; frame=0; score=0;
    particles.length=0;
    gameOverFlag=false;
    gameStarted=false;
    scoreEl.textContent=score;
    overlay.style.display='flex';
    overlayTitle.textContent='ü™Å Kite Flight';
    overlayText.textContent='Tap or Click to Start';
    startBtn.textContent='Start Game';
    startBtn.style.display='inline-block';
    shareBtn.style.display='none';
    if(animationId) cancelAnimationFrame(animationId);
}

function startGame(){
    if(gameStarted) return;
    gameStarted=true;
    overlay.style.display='none';
    kite.vy=0;
    animationId=requestAnimationFrame(gameLoop);
}

startBtn.addEventListener('click', ()=>{ resetGame(); startGame(); });

shareBtn.addEventListener('click', ()=>{
    const text = encodeURIComponent(`I scored ${score} in Kite Flight! ü™Å #GoKiteFlight @GoKiteAI`);
    window.open(`https://x.com/intent/tweet?text=${text}`,'_blank','noopener');
});

function spawnObstacle(){
    const gapY = Math.random()*(H-gapHeight-100)+50;
    obstacles.push({x:W, gapY:gapY, passed:false});
}

function createParticles(){
    if(particles.length>=100) return;
    for(let i=0;i<5;i++){
        particles.push({x:kite.x, y:kite.y, vx:(Math.random()-0.5)*2, vy:Math.random()*-2, alpha:1});
    }
}

function updateParticles(){
    particles.forEach(p=>{
        p.x+=p.vx;
        p.y+=p.vy;
        p.alpha-=0.02;
    });
    for(let i=particles.length-1;i>=0;i--){
        if(particles[i].alpha<=0) particles.splice(i,1);
    }
}

function update(){
    if(gameOverFlag || !gameStarted) return;

    frame++;
    kite.vy += gravity;
    kite.y += kite.vy;
    kite.angle = Math.min(kite.vy*2,25);

    if(frame%90===0) spawnObstacle();

    obstacles.forEach(obs=>{ obs.x-=4; });

    for(let obs of obstacles){
        if(kite.x+kite.w>obs.x && kite.x<obs.x+obstacleWidth){
            if(kite.y<obs.gapY || kite.y+kite.h>obs.gapY+gapHeight){
                endGame();
            }
        }
    }

    if(kite.y+kite.h>H || kite.y<0) endGame();

    obstacles.forEach(obs=>{
        if(!obs.passed && obs.x+obstacleWidth<kite.x){
            score++; obs.passed=true;
            scoreEl.textContent=score;
            pointSound.currentTime=0; pointSound.play();
        }
    });

    obstacles = obstacles.filter(obs=>obs.x+obstacleWidth>0);

    clouds.forEach(c=>{
        c.x -= c.speed*2;
        if(c.x+150<0){
            c.x=W+Math.random()*200;
            c.color=cloudColors[Math.floor(Math.random()*cloudColors.length)];
        }
    });

    updateParticles();
}

function drawCloud(ctx,x,y,scale,color){
    ctx.fillStyle=color;
    ctx.beginPath();
    ctx.arc(x,y,30*scale,Math.PI*0.5,Math.PI*1.5);
    ctx.arc(x+40*scale,y-20*scale,40*scale,Math.PI*1,Math.PI*1.85);
    ctx.arc(x+80*scale,y,30*scale,Math.PI*1.37,Math.PI*1.91);
    ctx.closePath();
    ctx.fill();
}

function drawBackground(){
    const grad=ctx.createLinearGradient(0,0,0,H);
    grad.addColorStop(0,"#87CEEB");
    grad.addColorStop(1,"#a0d8ff");
    ctx.fillStyle=grad;
    ctx.fillRect(0,0,W,H);

    clouds.forEach(c=> drawCloud(ctx,c.x,c.y,c.scale,c.color));

    particles.forEach(p=>{
        ctx.fillStyle=`rgba(255,255,255,${p.alpha})`;
        ctx.beginPath();
        ctx.arc(p.x,p.y,3,0,2*Math.PI);
        ctx.fill();
    });
}

function drawKite(){
    ctx.save();
    ctx.translate(kite.x+kite.w/2, kite.y+kite.h/2);
    ctx.rotate(kite.angle*Math.PI/180);
    ctx.font=kite.h+"px serif";
    ctx.textAlign="center";
    ctx.fillText("ü™Å",0,kite.h*0.3);
    ctx.restore();
}

// Professional pillar with horizontal KITEAI
function drawObstacles(){
    obstacles.forEach(obs=>{
        const brickHeight = 30; 
        const brickWidth = obstacleWidth;
        const text = "KITEAI";

        // Upper pillar
        for(let y=0; y<obs.gapY; y+=brickHeight){
            const grad = ctx.createLinearGradient(obs.x, y, obs.x+brickWidth, y+brickHeight);
            grad.addColorStop(0, "#8B4513");
            grad.addColorStop(1, "#A0522D");
            ctx.fillStyle = grad;
            ctx.fillRect(obs.x, y, brickWidth, brickHeight-2);

            ctx.strokeStyle="rgba(0,0,0,0.2)";
            ctx.lineWidth=1;
            ctx.strokeRect(obs.x, y, brickWidth, brickHeight-2);

            ctx.fillStyle="#FFD700";
            ctx.font="bold 14px Arial";
            ctx.textAlign="center";
            ctx.textBaseline="middle";
            ctx.fillText(text, obs.x + brickWidth/2, y + brickHeight/2);
        }

        // Lower pillar
        const lowerStart = obs.gapY + gapHeight;
        for(let y=lowerStart; y<H; y+=brickHeight){
            const grad = ctx.createLinearGradient(obs.x, y, obs.x+brickWidth, y+brickHeight);
            grad.addColorStop(0, "#8B4513");
            grad.addColorStop(1, "#A0522D");
            ctx.fillStyle = grad;
            ctx.fillRect(obs.x, y, brickWidth, brickHeight-2);

            ctx.strokeStyle="rgba(0,0,0,0.2)";
            ctx.lineWidth=1;
            ctx.strokeRect(obs.x, y, brickWidth, brickHeight-2);

            ctx.fillStyle="#FFD700";
            ctx.font="bold 14px Arial";
            ctx.textAlign="center";
            ctx.textBaseline="middle";
            ctx.fillText(text, obs.x + brickWidth/2, y + brickHeight/2);
        }
    });
}

function draw(){
    drawBackground();
    drawObstacles();
    drawKite();
}

function gameLoop(){
    if(gameOverFlag) return;
    update();
    draw();
    animationId=requestAnimationFrame(gameLoop);
}

function endGame(){
    gameOverFlag=true;
    overlay.style.display='flex';
    overlayTitle.textContent='Game Over! ü™Å';
    overlayText.innerHTML=`Score: ${score}<br><br>
    CEO / Co-founder: @ChiZhangData<br>
    CTO / Co-founder: @scottshics<br>
    Official account: @GoKiteAI<br>
    Made by @Vikash1234Singh<br>
    ‚ÄúKite AI: Wind Runner‚Äù Event`;
    startBtn.textContent='Restart';
    startBtn.style.display='inline-block';
    shareBtn.style.display='inline-block';
    crashSound.currentTime=0; crashSound.play();
}

window.addEventListener("resize",()=>{W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight;});
window.addEventListener('touchstart', ()=>{ 
    if(!gameStarted) startGame(); 
    else { kite.vy=lift; jumpSound.currentTime=0; jumpSound.play(); createParticles(); } 
});
window.addEventListener('mousedown', ()=>{ 
    if(!gameStarted) startGame(); 
    else { kite.vy=lift; jumpSound.currentTime=0; jumpSound.play(); createParticles(); } 
});

resetGame();
</script>
</body>
</html>
